<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Portfolio Admin â€¢ 2025</title>

  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Poppins:wght@400;500;600;700&family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">

  <!-- Firebase Compat -->
  <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-storage-compat.js"></script>

  <style>
    body { font-family: Inter, sans-serif; }
  </style>
</head>
<body class="bg-slate-950 text-slate-100 min-h-screen">

<!-- ========== LOGIN ========== -->
<div id="loginView" class="flex items-center justify-center min-h-screen">
  <div class="bg-slate-900 p-8 rounded-xl shadow-xl w-full max-w-md">
    <h1 class="text-2xl font-bold text-center mb-6">Admin Login</h1>
    <input id="admin-email" type="email" placeholder="Email" class="w-full mb-3 px-4 py-2 rounded bg-slate-800 border border-slate-700" />
    <input id="admin-password" type="password" placeholder="Password" class="w-full mb-4 px-4 py-2 rounded bg-slate-800 border border-slate-700" />
    <button onclick="login()" class="w-full py-2 rounded bg-indigo-600 hover:bg-indigo-700">Login</button>
    <p id="auth-msg" class="text-red-400 text-sm mt-3"></p>
  </div>
</div>

<!-- ========== DASHBOARD ========== -->
<div id="dashboard" class="hidden">
  <div class="flex">

    <!-- Sidebar -->
    <aside class="w-72 bg-slate-900 min-h-screen p-6">
      <h2 class="text-xl font-semibold mb-6">Portfolio Admin</h2>
      <nav class="space-y-3 text-sm">
        <button onclick="showSection('meta')" class="block w-full text-left hover:text-indigo-400">Site Meta</button>
        <button onclick="showSection('hero')" class="block w-full text-left hover:text-indigo-400">Hero</button>
        <button onclick="showSection('about')" class="block w-full text-left hover:text-indigo-400">About</button>
        <button onclick="showSection('cards')" class="block w-full text-left hover:text-indigo-400">Cards</button>
        <button onclick="showSection('skills')" class="block w-full text-left hover:text-indigo-400">Skills</button>
        <button onclick="showSection('styles')" class="block w-full text-left hover:text-indigo-400">Theme & Styles</button>
        <button onclick="showSection('footer')" class="block w-full text-left hover:text-indigo-400">Footer</button>
      </nav>
    </aside>

    <!-- Main Content -->
    <main class="flex-1 p-8 space-y-8">

      <!-- META -->
      <section id="meta" class="panel">
        <h3 class="text-xl font-semibold mb-4">Site Metadata</h3>
        <input id="site-title" placeholder="Website Title" class="input" />
        <input id="favicon-url" placeholder="Favicon URL" class="input" />
      </section>

      <!-- HERO -->
      <section id="hero" class="panel hidden">
        <h3 class="text-xl font-semibold mb-4">Hero Section</h3>
        <input id="hero-name" placeholder="Your Name" class="input" />
        <input id="hero-subtitle" placeholder="Subtitle" class="input" />
        <input id="hero-tagline" placeholder="Tagline" class="input" />
      </section>

      <!-- ABOUT -->
      <section id="about" class="panel hidden">
        <h3 class="text-xl font-semibold mb-4">About Section</h3>
        <textarea id="about-text" rows="5" class="input" placeholder="Paragraphs separated by new line"></textarea>
      </section>

      <!-- CARDS -->
      <section id="cards" class="panel hidden">
        <h3 class="text-xl font-semibold mb-4">Cards / Projects</h3>
        <div id="cardsContainer" class="grid grid-cols-1 md:grid-cols-3 gap-4"></div>
        <button onclick="addCard()" class="mt-4 bg-indigo-600 px-4 py-2 rounded">Add Card</button>
      </section>

      <!-- SKILLS -->
      <section id="skills" class="panel hidden">
        <h3 class="text-xl font-semibold mb-4">Skills</h3>
        <textarea id="skills-text" rows="3" class="input" placeholder="Skill:Level (e.g. JS:80)"></textarea>
      </section>

      <!-- STYLES -->
      <section id="styles" class="panel hidden">
        <h3 class="text-xl font-semibold mb-4">Theme & Styles</h3>
        <label class="block">Primary Color</label>
        <input type="color" id="primaryColor" />
        <label class="block mt-3">Secondary Color</label>
        <input type="color" id="secondaryColor" />
        <label class="block mt-3">Font Family</label>
        <select id="fontFamily" class="input">
          <option value="Inter">Inter</option>
          <option value="Poppins">Poppins</option>
          <option value="Roboto">Roboto</option>
        </select>
      </section>

      <!-- FOOTER -->
      <section id="footer" class="panel hidden">
        <h3 class="text-xl font-semibold mb-4">Footer</h3>
        <input id="footer-text" class="input" placeholder="Footer text" />
      </section>

      <button onclick="saveAll()" class="fixed bottom-6 right-6 bg-emerald-600 px-6 py-3 rounded-full shadow-xl">Save & Publish</button>
      <p id="save-msg" class="text-emerald-400 mt-4"></p>
    </main>
  </div>
</div>

<script>
/* ================= FIREBASE ================= */
const firebaseConfig = {
  apiKey: "AIzaSyBl7UeClHdUhEQC4eJXH8cTFsy31XPFrII",
  authDomain: "portfolio-fc649.firebaseapp.com",
  databaseURL: "https://portfolio-fc649-default-rtdb.firebaseio.com",
  projectId: "portfolio-fc649",
  storageBucket: "portfolio-fc649.appspot.com",
  messagingSenderId: "134392119777",
  appId: "1:134392119777:web:8b1fccb70bfe26886052a0"
};
firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();
const db = firebase.database();

/* ================= UI ================= */
function showSection(id) {
  document.querySelectorAll('.panel').forEach(p => p.classList.add('hidden'));
  document.getElementById(id).classList.remove('hidden');
}

/* ================= AUTH ================= */
function login() {
  auth.signInWithEmailAndPassword(
    admin-email.value,
    admin-password.value
  ).then(() => {
    loginView.classList.add('hidden');
    dashboard.classList.remove('hidden');
    loadData();
  }).catch(e => auth-msg.innerText = e.message);
}

/* ================= DATA ================= */
function loadData() {
  db.ref('portfolio').once('value').then(snap => {
    const d = snap.val() || {};
    site-title.value = d.meta?.title || '';
    favicon-url.value = d.meta?.favicon || '';
    hero-name.value = d.hero?.name || '';
    hero-subtitle.value = d.hero?.subtitle || '';
    hero-tagline.value = d.hero?.tagline || '';
    about-text.value = (d.about?.paragraphs || []).join('\n');
    footer-text.value = d.footer?.text || '';
    primaryColor.value = d.styles?.primary || '#6366f1';
    secondaryColor.value = d.styles?.secondary || '#0f172a';
    fontFamily.value = d.styles?.font || 'Inter';
  });
}

function saveAll() {
  const data = {
    meta: { title: site-title.value, favicon: favicon-url.value },
    hero: { name: hero-name.value, subtitle: hero-subtitle.value, tagline: hero-tagline.value },
    about: { paragraphs: about-text.value.split('\n').filter(Boolean) },
    footer: { text: footer-text.value },
    styles: {
      primary: primaryColor.value,
      secondary: secondaryColor.value,
      font: fontFamily.value
    },
    published: true,
    updatedAt: Date.now()
  };

  db.ref('portfolio').set(data).then(() => {
    save-msg.innerText = 'Changes published successfully';
    setTimeout(() => save-msg.innerText = '', 3000);
  });
}
</script>

</body>
</html>
